---
layout: post
title: SQL2
excerpt: "Structured Query Language"
categories: [SQL]
link:
comments: true
---
### SQL

###### 환경 설정 : 윈도우 / SQLdeveloper(from oracle);

* 흐름을 읽기 위한 단원 목차 훑기
5. SUBGROUP으로 데이터 분류
6. JOIN
7. SUBQUERY

이번 수업에서는 소스 파일을 받아서 데이터를 입력하고 시작했다.

해당 소스 파일 코드를 업로드 한다. 이 소스 파일을 C드라이브에 tmp라는 폴더를 만들어서 넣고, SQL*PLUS(명령 프롬프트) 혹은 SQL Developer에서 다음과 같이 실행하면 데이터가 입력된다. 주의 할 것은 둘 중 하나로만 해야한다. 동시에 SQL*PULS랑 SQL Developer를 실행하면 commit을 하지 않은 상태인 경우 pending을 하고 있기 때문에 다른 쪽에서 에러가 날 수 있다. 꼭 데이터베이스에 변화를 주면 무조건 커밋을 해야한다는 점을 기억하자.

사용한 SQL 소스 파일 [다운로드][1]

[1]:{{ https://youduk.github.io/ }}/download/edu_tables_all.sql

1)SQL*PLUS
C:\USER\YOURNAME>sqlplus
SQL> conn student/1234 (저번 수업 차에 만들어 놓은 권한이 부여된 연습 계정)
SQL> @c:\tmp\edu_tables_all.sql;

2)SQL developer
@c:\tmp\edu_tables_all.sql;

~~~sql
//GROUP BY와 HAVING이 들어간 SQL문 순서 구조
SELECT 칼럼명, GROUP 함수
FROM 테이블명
WHERE 조건식
GROUP BY 칼럼명 // 전체 데이터를 소그룹으로 나눌 칼럼을 명시한다.
HAVING 조건식(그룹에 대한 조건) // GROUP에 대한 조건을 기술한다.
ORDER BY 칼럼이나 표현식;

//각 부서(dept_id)별 평균 급여를 계산해서 보여주시오.
SELECT dept_id, AVG(salary) //4. 묶인 그룹들의 dept_id와 salary의 평균을 구한 값을 출력하겠다.
FROM s_emp // 1.s_emp 테이블에서
WHERE title = '사원' // 2.column title의 값이 '사원'인 column 데이터 중에서
GROUP BY dept_id; // 3. 같은 dept_id 끼리 그룹으로 묶어

{%raw%}  
![Smithsonian Image](/img/2017-09-06-01.PNG)
{%endraw%}


//각 부서(dept_id)별로 직책이 사원인 직원들의 평균 급여를 계산해서 보여주시오.
SELECT dept_id, title, AVG(salary) 4. 이중으로 묶인 그룹들의 dept_id와 title 값 그리고 salary의 평균을 구한 값을 출력하겠다.
FROM s_emp // 1.s_emp 테이블에서
WHERE title = '사원' // 2.column title의 값이 '사원'인 column 데이터 중에서
GROUP BY dept_id, title; 3. 같은 dept_id column 값을 가진 데이터를 그룹으로 묶고, 이 중에서 같은 title column 값을 가진 데이터끼리 또 다시 그룹으로 묶어



//

~~~
