---
layout: post
title: WAS
excerpt: "Web Application Server"
tags: [Boostcourse]
categories: [Web]
link:
comments: true
pinned: true
image:
  feature:
---

#### 클라이언트/서버 구조

- 클라이언트(Client)는 서비스(Service)를 제공하는 서버(Server)에게 정보를 요청하여 응답 받은 결과를 사용합니다. 
- 서비스를 제공하는 것 : 서버
- 서버에게 서비스를 요청해서 그 결과를 보여주는 것 : 클라이언트
- 웹 서버와 웹 브라우저가 대표적으로 서버와 클라이언트의 관계이다.

![](/Img/WAS_1.png)

#### **DBMS (DataBase Management System)**

- 데이터베이스를 관리하는 시스템을 일컫는다. DBMS가 등장하기 전에는 개발자들이 파일에 데이터를 저장하고 읽어들이는 등의 기능을 모두 구현해야 했다. 이러한 불편함을 해결하기 위한 결과로 DBMS라는 소프트웨어가 등장했다.
- 다수의 사용자가 데이터베이스 내의 데이터에 접근할 수 있도록 해주는 소프트웨어이다.
- MySQL, mariaDB, Oracle, PostgreSQL 등 굉장히 많은 종류가 있다.
- DBMS는 보통 서버 형태로 서비스를 제공하기 때문에 이러한 DBMS에 접속해서 동작하는 Client 프로그램이 많이 만들어졌다. 하지만 이러한 방식은 클라이언트에 로직이 많아지고 클라이언트 프로그램의 크기가 많아진다는 문제가 있었다. 따라서 변경이 생기면 클라이언트를 다시 배포해야만 했다. 이 문제를 해결하기 위해 등장한 것이 **미들웨어**이다.

![](/Img/WAS_2.png)

#### **미들웨어 (MiddleWare)**

- 클라이언트와 DBMS 사이에 또 다른 서버를 두는 방식. 
- 클라이언트는 단순히 요청만 미들웨어에 보내고, 이 미들웨어는 대부분의 로직을 수행한다. 이 때, 데이터를 조작할 일이 있으면 DBMS에게 부탁한다. 미들웨어는 DBMS로부터 받은 결과를 클라이언트에 전송하고, 클라이언트는 전송받은 결과를 화면에 보여주게 된다. 클라이언트는 복잡한 로직이 사라지고 단순히 화면에 결과만 보여주면 된다. 때문에 사용자로부터 입력만 받아서 미들웨어로만 보내는 기능만 수행하게되므로 자연스럽게 크기가 작아지게 된다. 프로그램 로직이 변경이 된다고 하더라도 모든 클라이언트를 다시 배포할 필요가 없이, 중앙의 미들웨어만 변경하면 된다.
- 클라이언트 쪽에 비즈니스 로직이 많을 경우, 클라이언트 관리(배포 등)로 인해 비용이 많이 발생하는 문제가 있다.
- 비즈니스 로직을 클라이언트와 DBMS사이의 미들웨어 서버에서 동작하도록 함으로써 클라이언트는 입력과 출력만 담당하도록 한다.

![](/Img/WAS_3.png)

#### **WAS (Web Application Server)**

- 최초에 웹이 등장했을 때는 웹브라우저가 정적인 데이터(저장되어 있는 파일)만 보여주었다. 웹이 널리 사용되기 시작하면서 사용자들의 요구 사항이 커지게 됐고, 웹 에서 데이터를 입력하고 저장하는 등의 동적인 기능을 요구하게 되었다. 동적인 기능은 프로그래밍을 통해서 가능했다. 웹 서버에서 프로그래밍 기능이 들어가는 방식을 CGI라고 불렀었고, CGI는 단순한 프로그래밍 단계에서는 사용 시 문제가 없었다. 그러나 웹은 점점 복잡해졌고, 더 복잡한 프로그래밍 기능을  요구하게 되었다. 보통 이 복잡한 기능들은 DBMS와 연관된 것들이 많았다. 웹 브라우저를 클라이언트라고 본다면 <u>웹 브라우저와 DBMS 사이에서 동작하는 미들웨어가 필요하게 된 것</u>이다. 이러한 미들웨어를 **WAS**라고 말한다. 즉, WAS는 미들웨어에 포함이 되는 개념이다. 
- WAS가 가지는 중요한 기능
  1. 프로그램 실행 환경과 데이터베이스 접속 기능을 제공한다.
  2. 여러 개의 트랜젝션(논리적인 데이터 단위)을 관리한다.
  3. 업무를 처리하는 비즈니스 로직을 수행한다.
  4. 이 외에도 WAS는 다양한 기능을 제공하는데, **웹 서버**의 기능도 제공한다. 웹 서버와 WAS를 따로 설치하지 않고 WAS인 Tomcat만 설치하고 이용이 가능한 이유는 Tomcat이 가지고 있는 웹 서버가 충분한 기능을 하고 있기 때문에 Apache같은 웹 서버를 따로 설치하지 않고도 개발할 수 있는 것이다.

WAS는 일종의 미들웨어로 웹 클라이언트(보통 웹 브라우저)의 요청 중 웹 애플리케이션이 동작하도록 지원하는 목적을 가집니다.

![](/Img/WAS_4.png)

#### **웹 서버 vs WAS**

- 현업에서는 아래와 같은 형태로 구성을 하는 경우가 많다. 웹 서버는 보통 정적인 컨텐츠를 웹 브라우저에게 전송하는 역할을 하고, WAS는 프로그램의 동적인 결과를 웹 브라우저에게 전송하는 역할을 담당한다. 프로그램이 동작해서 얻은 결과를 동적인 컨텐츠라고 하기도 한다. 
- WAS에서 제공하는 웹 서버의 기능도 웹 서버가 제공하는 기능에 비해 성능이 뒤떨어지지 않는다. 사실 웹 서버없이 WAS만 있어도 정적인 컨텐츠와 동적인 컨텐츠를 모두 제공할 수 있다. WAS 초창기에는 WAS에 탑재된 내장 웹 서버가 성능이 떨어졌었지만, 계속 발전하면서 웹 서버의 역할을 충분히 할 수 있게 되었다. 
- 그럼에도 불구하고 웹 서버가 WAS 앞 단에 있으면 좋은 이유는 무엇일까? 웹 서버는 상대적으로 WAS보다 간단한 구조로 만들어져있다. 사람들이 많이 접속하는 대용량 웹 어플리케이션의 경우에는 서버의 수가 여러 대일 수 있다. 서비스 운영 도중, 개발자가 WAS에서 동작하도록 만든 프로그램이 오작동이 발생해서 WAS 자체에 문제가 발생하는 경우가 있다. 이 경우에는 불가피하게 WAS를 재시작해야 하는데, 문제가 있는 WAS를 재시작할 때 서비스는 어쩔 수 없이 중단되게 된다. 그러나 앞 단의 웹 서버에서 문제가 생긴 WAS를 이용하지 못하게 하고 WAS를 재시작한다면, 웹 어플리케이션을 사용하고 있는 사용자는 WAS에 문제가 발생했는지를 모르고 중단 없이 서비스를 이용하게 된다. 이러한 처리를 **장애 극복 기능(failover)**이라고 한다. 대용량 웹 어플리케이션에서는 중단 없이 서비스를 유지하기 위해 상당히 중요한 부분이다. 이러한 기능 때문에 웹 서버가 WAS 앞 단에서 동작하는 경우가 많다.

![](/Img/WAS_5.png)