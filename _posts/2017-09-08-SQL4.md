---
layout: post
title: SQL4
excerpt: "OBJECT, ADVANCED SQL"
categories: [SQL]
link:
comments: true
---
### SQL

###### 환경 설정 : 윈도우 / SQLdeveloper(from oracle);

* 흐름을 읽기 위한 단원 목차 훑기
8. OBJECT
9. ADVANCED SQL

<h3>Object</h3>

<h5>object의 종류 및 기능</h5>

|  <center>오브젝트</center> |<center>설명</center>|
|:--------|:--------|
|**테이블(table)** |행과 열의 조합으로 구성된 기본 저장단위|
|**시퀀스(sequence)** |자동으로 고유한 숫자값을 생성해주며 주로 기본키 값을 생성하기위해 사용|
|**인덱스(index)** |쿼리(query) 속도를 향상시키기 위해 사용|
|**뷰(view)** |하나 또는 그 이상의 테이블로부터 논리적으로 데이터를 추출한 부분집합으로 논리적이고 가상적인 테이블|
|**시노님(synonym)** |OBJECT에 대한 또다른 이름으로 ALIAS역할|
|**프로그램 유닛(program unit)** |SQL, PL/SQL문으로 작성한 Procedure, Function, Trigger, Package|

<h5>SEQUENCE</h5>

~~~sql
CREATE SEQUENCE c_emp_id
INCREMENT BY 1 //시퀀스 번호 간의 간격. 생략되면 1씩 증가
START WITH 26 //생성되는 첫 번째 시퀀스 번호. 생략되면 시퀀스는 1부터 시작
MAXVALUE 9999999 | MINVALUE 1 //생성 가능한 시퀀스의 최대값(NOMAXVALUE | NOMINVALUE : 기본 옵션으로 최대값은 10^27)
CACHE | NOCACHE //최대값이나 최소값까지 값이 생성된 경우에도 값을 생성시키는 것으로 기본은 NOCYCLE(Primary key는 NOCYCLE로 해야 한다.)
CYCLE | NOCYCLE; //메모리에 유지할 값의 수로, 기본값은 20 NOCACHE일 때만, 테이블에서 조회 가능
~~~

<h5>SEQUENCE 사용법</h5>

의사 컬럼(Pseud columns) NEXTVAL, CURRVAL 사용
* NEXTVAL : NEXTVAL은 사용 가능한 다음 SEQUENCE 값을 반환한다. NEXTVAL은 다른 사용자에 의해 참조되더라도 매번 고유한 값을 반환한다.
* CURRVAL : 현재 SEQUENCE 값을 포함한다. 반드시 NEXTVAL사용 후에 참조되어야 한다.

<h5>SEQUENCE 사용 규칙</h5>

NEXTVAL과 CURRVAL을 사용할 수 있는 경우
* Subquery가 아닌 SELECT문
* INSERT문의 SELECT절
* INSERT문의 VALUE절
* UPDATE문의 SET절

NEXTVAL과 CURRVAL을 사용할 수 없는 경우
* VIEW의 SELECT절
* DISTINCT 키워드가 있는 SELECT
* GROUP BY, HAVING, ORDER BY절이 있는 SELECT문
* SELECT, DELETE, 또는 UPDATE문의 Subquery
* CREATEE TABLE, ALTER TABLE 명령의 DEFAULT값

~~~sql
//S_EMP테이블에서 이름은 홍길동, 급여는 2000, 나머지는 null을 입력하되, 사번은 sequence값을 이용하시오.

//시퀀스를 사용하기 위해 시퀀스 생성
CREATE SEQUENCE c_emp_id
INCREMENT BY 1
START WITH 26
MAXVALUE 99999
NOCACHE
NOCYCLE;

//입력
INSERT INTO(id, name, salary)
VALUES(c_emp_id.NEXTVAL, 홍길동, 2000);
~~~
