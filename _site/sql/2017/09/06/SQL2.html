<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121414052-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-121414052-1');
</script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SQL2</title>
  <meta name="description" content="SUBGROUP, JOIN, SUBQUERY">

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/sql/2017/09/06/SQL2.html">
  <link rel="alternate" type="application/rss+xml" title="Ducku Salon" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>

<body>
  <script id="dsq-count-scr" src="//https-youduk-github-io.disqus.com/count.js" async></script>
  <div class="row">
    <div class="col s12 m12">
      <div class="table cover">
        
<div class="cover-card table-cell table-middle">
  
  <img src="http://localhost:4000/img/authorLogo.jpeg" alt="" class="avatar">
  
  <a href="http://localhost:4000/" class="author_name">Ducku Salon</a>
  <span class="author_job">portfolio &amp; Tech blog</span>
  <span class="author_bio mbm">Dreams are not dreamt, they are commplished.</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
      </li>
       
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">Archive</a>
      </li>
            
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">Categories</a>
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/resume/">Resume</a>
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/tags/">Tags</a>
      </li>
                                                                           
    </ul>
  </nav>
  <script type="text/javascript">
  // based on https://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('rnejrl123456@gmail.com', 'Hello from website');</script>
      </li>
    
    
    <li><a href="https://facebook.com/originducku" class="social-link-item" target="_blank"><i class="fa fa-fw fa-facebook"></i></a></li>
    
    <li><a href="https://linkedin.com/in/youduk-han-2bbb94108" class="social-link-item" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a></li>
    
    
    
    
    <li><a href="https://github.com/Youduk" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m12">
      <div class="post-listing">
        <div class="post-container">
<a class="btn" href="http://localhost:4000/">
  Home
</a>



<div id="post">
  <header class="post-header">
    <h1 title="SQL2">SQL2</h1>
    <span class="post-meta">
      <span class="post-date">
        6 SEP 2017
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    21 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <h3 id="sql">SQL</h3>

<h6 id="환경-설정--윈도우-sqldeveloperfrom-oracle">환경 설정 : 윈도우, SQLdeveloper(from oracle);</h6>

<ul>
  <li>흐름을 읽기 위한 단원 목차 훑기
    <ol>
      <li>SUBGROUP으로 데이터 분류</li>
      <li>JOIN</li>
      <li>SUBQUERY</li>
    </ol>
  </li>
</ul>

<p>이번 수업에서는 소스 파일을 받아서 데이터를 입력하고 시작했다.</p>

<p>해당 소스 파일 코드를 업로드 한다. 이 소스 파일을 C드라이브에 tmp라는 폴더를 만들어서 넣고, SQL<em>PLUS(명령 프롬프트) 혹은 SQL Developer에서 다음과 같이 실행하면 데이터가 입력된다. 주의 할 것은 둘 중 하나로만 해야한다. 동시에 SQL</em>PULS랑 SQL Developer를 실행하면 commit을 하지 않은 상태인 경우 pending을 하고 있기 때문에 다른 쪽에서 에러가 날 수 있다. 꼭 데이터베이스에 변화를 주면 무조건 커밋을 해야한다는 점을 기억하자.</p>

<p>사용한 SQL 소스 파일 <a href="/download/edu_tables_all.sql">다운로드</a></p>

<p>1)SQL*PLUS<br>
C:\USER\YOURNAME&gt;sqlplus<br>
SQL&gt; conn student/1234 (저번 수업 차에 만들어 놓은 권한이 부여된 연습 계정)<br>
SQL&gt; <a href="https://github.com/c" class="user-mention">@c</a>:\tmp\edu_tables_all.sql;<br></p>

<p>2)SQL developer<br>
<a href="https://github.com/c" class="user-mention">@c</a>:\tmp\edu_tables_all.sql;</p>

<p>위의 소스코드 데이터를 입력한 후 생성된 데이터들을 가지고 아래 문제들을 풀어보았다.</p>

<h3>SUBGROUP</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="k">GROUP</span> <span class="k">BY</span><span class="err">와</span> <span class="k">HAVING</span><span class="err">이</span> <span class="err">들어간</span> <span class="k">SQL</span><span class="err">문</span> <span class="err">순서</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="err">칼럼명</span><span class="p">,</span> <span class="k">GROUP</span> <span class="err">함수</span>
<span class="k">FROM</span> <span class="err">테이블명</span>
<span class="k">WHERE</span> <span class="err">조건식</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="err">칼럼명</span> <span class="o">//</span> <span class="err">전체</span> <span class="err">데이터를</span> <span class="err">소그룹으로</span> <span class="err">나눌</span> <span class="err">칼럼을</span> <span class="err">명시한다</span><span class="p">.</span>
<span class="k">HAVING</span> <span class="err">조건식</span><span class="p">(</span><span class="err">그룹에</span> <span class="err">대한</span> <span class="err">조건</span><span class="p">)</span> <span class="o">//</span> <span class="k">GROUP</span><span class="err">에</span> <span class="err">대한</span> <span class="err">조건을</span> <span class="err">기술한다</span><span class="p">.</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="err">칼럼이나</span> <span class="err">표현식</span><span class="p">;</span>

<span class="o">//</span><span class="err">각</span> <span class="err">부서</span><span class="p">(</span><span class="n">dept_id</span><span class="p">)</span><span class="err">별</span> <span class="err">평균</span> <span class="err">급여를</span> <span class="err">계산해서</span> <span class="err">보여주시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">dept_id</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">//</span><span class="mi">4</span><span class="p">.</span> <span class="err">묶인</span> <span class="err">그룹들의</span> <span class="n">dept_id</span><span class="err">와</span> <span class="n">salary</span><span class="err">의</span> <span class="err">평균을</span> <span class="err">구한</span> <span class="err">값을</span> <span class="err">출력하겠다</span><span class="p">.</span>
<span class="k">FROM</span> <span class="n">s_emp</span> <span class="o">//</span> <span class="mi">1</span><span class="p">.</span><span class="n">s_emp</span> <span class="err">테이블에서</span>
<span class="k">WHERE</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">'사원'</span> <span class="o">//</span> <span class="mi">2</span><span class="p">.</span><span class="k">column</span> <span class="n">title</span><span class="err">의</span> <span class="err">값이</span> <span class="s1">'사원'</span><span class="err">인</span> <span class="k">column</span> <span class="err">데이터</span> <span class="err">중에서</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept_id</span><span class="p">;</span> <span class="o">//</span> <span class="mi">3</span><span class="p">.</span> <span class="err">같은</span> <span class="n">dept_id</span> <span class="err">끼리</span> <span class="err">그룹으로</span> <span class="err">묶어</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-01.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서</span><span class="p">(</span><span class="n">dept_id</span><span class="p">)</span><span class="err">별로</span> <span class="err">직책이</span> <span class="err">사원인</span> <span class="err">직원들의</span> <span class="err">평균</span> <span class="err">급여를</span> <span class="err">계산해서</span> <span class="err">보여주시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="mi">4</span><span class="p">.</span> <span class="err">이중으로</span> <span class="err">묶인</span> <span class="err">그룹들의</span> <span class="n">dept_id</span><span class="err">와</span> <span class="n">title</span> <span class="err">값</span> <span class="err">그리고</span> <span class="n">salary</span><span class="err">의</span> <span class="err">평균을</span> <span class="err">구한</span> <span class="err">값을</span> <span class="err">출력하겠다</span><span class="p">.</span>
<span class="k">FROM</span> <span class="n">s_emp</span> <span class="o">//</span> <span class="mi">1</span><span class="p">.</span><span class="n">s_emp</span> <span class="err">테이블에서</span>
<span class="k">WHERE</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">'사원'</span> <span class="o">//</span> <span class="mi">2</span><span class="p">.</span><span class="k">column</span> <span class="n">title</span><span class="err">의</span> <span class="err">값이</span> <span class="s1">'사원'</span><span class="err">인</span> <span class="k">column</span> <span class="err">데이터</span> <span class="err">중에서</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">;</span> <span class="mi">3</span><span class="p">.</span> <span class="err">같은</span> <span class="n">dept_id</span> <span class="k">column</span> <span class="err">값을</span> <span class="err">가진</span> <span class="err">데이터를</span> <span class="err">그룹으로</span> <span class="err">묶고</span><span class="p">,</span> <span class="err">이</span> <span class="err">중에서</span> <span class="err">같은</span> <span class="n">title</span> <span class="k">column</span> <span class="err">값을</span> <span class="err">가진</span> <span class="err">데이터끼리</span> <span class="err">또</span> <span class="err">다시</span> <span class="err">그룹으로</span> <span class="err">묶어</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-02.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">지역</span><span class="p">(</span><span class="n">region_id</span><span class="p">)</span><span class="err">별로</span> <span class="err">몇</span> <span class="err">개의</span> <span class="err">부서가</span> <span class="err">있는지를</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_REGION</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_DEPT</span><span class="p">,</span> <span class="n">S_REGION</span>
<span class="k">WHERE</span> <span class="n">S_REGION</span><span class="p">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">REGION_ID</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_REGION</span><span class="p">.</span><span class="n">NAME</span><span class="p">;</span>
<span class="o">*</span> <span class="n">s_region</span><span class="err">별로</span> <span class="err">카운트를</span> <span class="err">하려면</span> <span class="k">where</span> <span class="err">조건을</span> <span class="err">만족하는</span> <span class="n">s_region</span><span class="err">들을</span> <span class="err">끼리끼리</span> <span class="err">그룹화</span> <span class="err">시켜야같은</span> <span class="n">id</span><span class="err">를</span> <span class="err">가진</span> <span class="err">그룹끼리</span> <span class="err">셀</span> <span class="err">수가</span> <span class="err">있다</span><span class="p">.</span> <span class="err">따라서</span> <span class="k">group</span> <span class="k">by</span><span class="err">에</span> <span class="n">s_region</span><span class="p">.</span><span class="n">name</span><span class="err">을</span> <span class="err">명시해주지</span> <span class="err">않으면</span> <span class="err">에러가</span> <span class="err">난다</span><span class="p">.</span>
<span class="o">-&gt;</span><span class="n">ORA</span><span class="o">-</span><span class="mi">00937</span> <span class="p">:</span> <span class="k">not</span> <span class="n">a</span> <span class="n">single</span><span class="o">-</span><span class="k">group</span> <span class="k">group</span> <span class="k">function</span><span class="p">.</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-03.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서별로</span> <span class="err">평균</span> <span class="err">급여를</span> <span class="err">구하되</span> <span class="err">평균</span> <span class="err">급여가</span> <span class="mi">2000</span><span class="err">이상인</span> <span class="err">부서만</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">))</span>
<span class="k">FROM</span> <span class="n">S_DEPT</span><span class="p">,</span> <span class="n">S_EMP</span>
<span class="k">WHERE</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="o">=</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">ID</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">NAME</span>
<span class="k">HAVING</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">2000</span><span class="p">;</span>
<span class="o">*</span> <span class="k">GROUP</span><span class="err">과</span> <span class="k">GROUP</span><span class="err">함수에</span> <span class="err">대한</span> <span class="err">모든</span> <span class="err">조건은</span> <span class="k">HAVING</span> <span class="err">절에</span> <span class="err">입력해야한다</span><span class="p">.(</span><span class="k">WHERE</span><span class="err">절에</span> <span class="err">입력할</span> <span class="err">수</span> <span class="err">없다</span><span class="p">.)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-04.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">직책별로</span> <span class="err">급여의</span> <span class="err">총합을</span> <span class="err">구하되</span> <span class="err">직책이</span> <span class="err">부장인</span> <span class="err">사람은</span> <span class="err">제외하시오</span><span class="p">.</span> <span class="err">단</span><span class="p">,</span> <span class="err">급여총합이</span> <span class="mi">8000</span><span class="p">(</span><span class="err">만원</span><span class="p">)</span> <span class="err">이상인</span> <span class="err">직책만</span> <span class="err">나타내며</span><span class="p">,</span> <span class="err">급여</span> <span class="err">총합에</span> <span class="err">대한</span> <span class="err">오름차순으로</span> <span class="err">정렬하시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_EMP</span>
<span class="k">WHERE</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span> <span class="k">NOT</span> <span class="k">LIKE</span> <span class="s1">'%부장'</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span>
<span class="k">HAVING</span> <span class="k">SUM</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">8000</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="k">SUM</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span> <span class="k">ASC</span> <span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-05.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서별로</span> <span class="err">직책이</span> <span class="err">사원인</span> <span class="err">직원들에</span> <span class="err">대해서만</span> <span class="err">평균</span> <span class="err">급여를</span> <span class="err">구하시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_EMP</span>
<span class="k">WHERE</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="s1">'사원'</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-06.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서내에서</span> <span class="err">각</span> <span class="err">직책별로</span> <span class="err">몇</span> <span class="err">명의</span> <span class="err">인원이</span> <span class="err">있는지를</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_EMP</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="k">ASC</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
<p><img src="/img/2017-09-06-07.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서내에서</span> <span class="err">몇</span> <span class="err">명의</span> <span class="err">직원이</span> <span class="err">근무하는지를</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_EMP</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="k">ASC</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-08.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">각</span> <span class="err">부서별로</span> <span class="err">급여의</span> <span class="err">최소값과</span> <span class="err">최대값을</span> <span class="err">나타내시오</span><span class="p">.</span> <span class="err">단</span><span class="p">,</span> <span class="err">최소값과</span> <span class="err">최대값이</span> <span class="err">같은</span> <span class="err">부서는</span> <span class="err">출력하지</span> <span class="err">마시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="k">MAX</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">),</span> <span class="k">MIN</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">S_EMP</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span>
<span class="k">HAVING</span> <span class="k">MAX</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span> <span class="o">!=</span> <span class="k">MIN</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">.</span><span class="n">SALARY</span><span class="p">)</span> <span class="o">//</span> <span class="k">MAX</span><span class="err">와</span> <span class="k">MIN</span><span class="err">은</span> <span class="err">그룹함수이므로</span> <span class="err">조건식을</span> <span class="k">HAVING</span><span class="err">에</span> <span class="err">써준다</span><span class="p">.</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="k">ASC</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-09.PNG" alt="Smithsonian Image"></p>

<h3>JOIN</h3>

<p>JOIN은 하나 이상의 테이블로부터 연관된 데이터를 검색해오는 방법이다.
일반적인 경우에 행들은 Primary Key(PK)와 Foreign Key(FK) 값의 연관에 의해 JOIN이 성립된다.
그러나 어떤 경우에는 이러한 PK,FK 관계가 없어도 논리적인 값들의 연관만으로 JOIN이 성립되기도 한다.</p>

<p>JOIN의 종류</p>
<ul>
  <li>EQUIJOIN : column 간의 값들이 서로 정확히 일치하는 경우에 사용. 일반적으로 PK, FK 관계에 의함</li>
  <li>NON-EQUIJOIN : 한 칼럼의 값이 다른 칼럼의 값과 정확히 일치하지 않는 경우에 사용</li>
  <li>OUTER JOIN : JOIN조건을 만족하지 않는 경우에도 모든 행들을 다 보려는 경우에 사용</li>
  <li>SELF JOIN : 같은 테이블에 있는 행들을 JOIN하고자 하는 경우에 사용</li>
</ul>

<p><strong>주의</strong>: JOIN에 대한 조건이 생략되거나 잘못 기술디면, 한 테이블에 있는 모든 행들이 다른 테이블에 있는 모든 행들과 JOIN된다.
이런 결과를 Cartesian product(모든 케이스가 다 JOIN되는 것)라고 하는데, 이런 결과를 얻지 않기 위해서는 반드시 JOIN시에 WHERE를 기술해야한다.</p>

<p><img src="https://wikis.gm.fh-koeln.de/wiki_db/uploads/Datenbanken/Join-Typ-SQL/inner_outer_join_sql3.jpg" alt="Smithsonian Image"><br></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="n">EQUIJOIN</span><span class="p">(</span><span class="k">INNER</span> <span class="k">JOIN</span><span class="p">)</span><span class="err">의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="err">테이블명</span><span class="p">.</span><span class="err">칼럼명</span><span class="p">,</span> <span class="err">테이블명</span><span class="p">.</span><span class="err">칼럼명</span><span class="p">,</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="err">테이블</span><span class="mi">1</span><span class="p">,</span> <span class="err">테이블</span><span class="mi">2</span>
<span class="k">WHERE</span> <span class="err">테이블</span><span class="mi">1</span><span class="p">.</span><span class="err">칼럼</span><span class="mi">1</span> <span class="o">=</span> <span class="err">테이블</span><span class="mi">2</span><span class="p">.</span><span class="err">칼럼</span><span class="mi">2</span><span class="p">;</span>

<span class="err">테이블명</span><span class="p">.</span><span class="err">칼럼명</span> <span class="p">:</span> <span class="err">검색해올</span> <span class="err">데이터가</span> <span class="err">어디에서</span> <span class="err">오는지</span> <span class="err">테이블과</span> <span class="err">칼럼을</span> <span class="err">밝혀준다</span><span class="p">.</span>
<span class="err">테이블</span><span class="mi">1</span><span class="p">.</span><span class="err">칼럼</span><span class="mi">1</span> <span class="o">=</span> <span class="err">테이블</span><span class="mi">2</span><span class="p">.</span><span class="err">칼러</span><span class="mi">2</span> <span class="p">:</span> <span class="err">두</span> <span class="err">테이블</span> <span class="err">간에</span> <span class="err">논리적으로</span> <span class="err">값을</span> <span class="err">연결시키는</span> <span class="err">칼럼</span> <span class="err">간의</span> <span class="err">조건을</span> <span class="err">기술한다</span><span class="p">.</span>

<span class="o">//</span><span class="err">직원</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">)</span><span class="err">테이블과</span> <span class="err">부서</span><span class="p">(</span><span class="n">S_DEPT</span><span class="p">)</span><span class="err">테이블을</span> <span class="k">JOIN</span><span class="err">하여</span><span class="p">,</span> <span class="err">사원의</span> <span class="err">이름과</span> <span class="err">부서</span><span class="p">,</span> <span class="err">부서명을</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span><span class="p">,</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">NAME</span>
<span class="k">FROM</span> <span class="n">S_EMP</span><span class="p">,</span><span class="n">S_DEPT</span>
<span class="k">WHERE</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="o">=</span> <span class="n">S_DEPT</span><span class="p">.</span><span class="n">ID</span> <span class="k">AND</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="s1">'사원'</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">S_EMP</span><span class="p">.</span><span class="n">NAME</span> <span class="k">ASC</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-10.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="err">칼럼과</span> <span class="err">테이블의</span> <span class="k">ALIAS</span> <span class="err">사용</span>
<span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span> <span class="err">사원명</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span> <span class="err">부서명</span>
<span class="k">FROM</span> <span class="n">s_emp</span> <span class="n">e</span><span class="p">,</span> <span class="n">s</span><span class="o">+</span><span class="n">dept</span> <span class="n">d</span>
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="n">dept_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="err">테이블명</span><span class="p">.</span><span class="err">컬럼명</span> <span class="err">형식으로</span> <span class="err">기술</span> <span class="err">시</span><span class="p">,</span> <span class="err">테이블명이</span> <span class="err">길면</span> <span class="err">많은</span> <span class="err">시간이</span> <span class="err">소요되므로</span> <span class="err">테이블에</span> <span class="err">대한</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">지정하는</span> <span class="err">것이</span> <span class="err">좋다</span><span class="p">.</span>
<span class="err">일단</span> <span class="err">테이블에</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">지정했으면</span><span class="p">,</span> <span class="err">테이블명</span> <span class="err">대신에</span> <span class="err">반드시</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">써야</span> <span class="err">한다</span><span class="p">.</span>
<span class="err">또한</span> <span class="err">칼럼에</span> <span class="err">대한</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">지정함으로써</span> <span class="err">출력시</span> <span class="err">컬럼</span> <span class="err">표기를</span> <span class="err">명확히</span> <span class="err">할</span> <span class="err">수</span> <span class="err">있다</span><span class="p">.</span>

<span class="o">//</span><span class="err">서울</span> <span class="err">지역에</span> <span class="err">근무하는</span> <span class="err">사원에</span> <span class="err">대해</span> <span class="err">각</span> <span class="err">사원의</span> <span class="err">이름과</span> <span class="err">근무하는</span> <span class="err">부서명을</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">E</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">D</span><span class="p">.</span><span class="n">NAME</span>
<span class="k">FROM</span> <span class="n">S_EMP</span> <span class="n">E</span><span class="p">,</span> <span class="n">S_DEPT</span> <span class="n">D</span>
<span class="k">WHERE</span> <span class="n">D</span><span class="p">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">DEPT_ID</span> <span class="k">AND</span> <span class="n">E</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="s1">'사원'</span> <span class="k">AND</span> <span class="n">D</span><span class="p">.</span><span class="n">REGION_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-11.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="n">NON</span><span class="o">-</span><span class="n">EQUIJOIN</span><span class="err">의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">grade</span> <span class="err">급여동급</span>
<span class="k">FROM</span> <span class="n">e_emp</span> <span class="n">e</span><span class="p">,</span> <span class="n">salgrade</span> <span class="k">g</span>
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="n">salary</span> <span class="k">BETWEEN</span> <span class="k">g</span><span class="p">.</span><span class="n">losal</span> <span class="k">AND</span> <span class="k">g</span><span class="p">.</span><span class="n">hisal</span><span class="p">;</span>

<span class="n">NON</span><span class="o">-</span><span class="n">EQUIJOIN</span><span class="err">이란</span> <span class="err">한</span> <span class="err">컬럼의</span> <span class="err">값이</span> <span class="err">다른</span> <span class="err">컬럼의</span> <span class="err">값과</span> <span class="err">정확히</span> <span class="err">일치하지</span> <span class="err">않는</span> <span class="err">경우</span> <span class="s1">'='</span> <span class="err">연산자</span> <span class="err">외의</span> <span class="err">다른</span> <span class="err">연산자를</span> <span class="err">사용하여</span> <span class="k">JOIN</span><span class="err">하는</span> <span class="err">방법을</span> <span class="err">말한다</span><span class="p">.</span>
<span class="err">즉</span><span class="p">,</span> <span class="err">정확한</span> <span class="err">값의</span> <span class="err">비교가</span> <span class="err">아니라</span> <span class="err">값의</span> <span class="err">범위를</span> <span class="err">비교해야</span> <span class="err">할</span> <span class="err">때</span> <span class="err">사용한다</span><span class="p">.</span>

<span class="o">//</span><span class="err">직원</span> <span class="err">테이블</span><span class="p">(</span><span class="n">S_EMP</span><span class="p">)</span><span class="err">과</span> <span class="err">급여</span> <span class="err">테이블</span><span class="p">(</span><span class="n">SALGRADE</span><span class="p">)</span><span class="err">을</span> <span class="k">JOIN</span><span class="err">하여</span> <span class="err">사원의</span> <span class="err">이름과</span> <span class="err">급여</span><span class="p">,</span> <span class="err">그리고</span> <span class="err">해당</span> <span class="err">급여등급을</span> <span class="err">나타내시오</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">E</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">E</span><span class="p">.</span><span class="n">SALARY</span><span class="p">,</span> <span class="k">G</span><span class="p">.</span><span class="n">GRADE</span>
<span class="k">FROM</span> <span class="n">S_EMP</span> <span class="n">E</span><span class="p">,</span> <span class="n">SALGRADE</span> <span class="k">G</span>
<span class="k">WHERE</span> <span class="n">E</span><span class="p">.</span><span class="n">SALARY</span> <span class="k">BETWEEN</span> <span class="k">G</span><span class="p">.</span><span class="n">LOSAL</span> <span class="k">AND</span> <span class="k">G</span><span class="p">.</span><span class="n">HISAL</span> <span class="k">AND</span> <span class="n">E</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="s1">'사원'</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-12.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="k">OUTER</span> <span class="k">JOIN</span><span class="err">의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span> <span class="err">사원명</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">name</span> <span class="err">고객명</span>
<span class="k">FROM</span> <span class="n">s_emp</span> <span class="n">e</span><span class="p">,</span> <span class="n">s_customer</span>
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="n">id</span><span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">sales_rep_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="mi">2</span><span class="p">;</span>

<span class="mi">1</span><span class="p">.</span> <span class="k">OUTER</span> <span class="k">JOIN</span><span class="err">을</span> <span class="err">하는</span> <span class="err">경우에는</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="err">연산자를</span> <span class="err">사용한다</span><span class="p">.</span>
<span class="mi">2</span><span class="p">.</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="err">를</span> <span class="err">사용하는</span> <span class="err">위치는</span> <span class="k">JOIN</span><span class="err">할</span> <span class="err">데이터가</span> <span class="err">부족한</span> <span class="err">쪽</span><span class="p">(</span><span class="err">즉</span><span class="p">,</span> <span class="err">상대</span> <span class="err">테이블과</span> <span class="err">비교할</span> <span class="err">데이터가</span> <span class="err">존재하지</span> <span class="err">않는</span> <span class="err">쪽</span><span class="p">)</span><span class="err">에</span> <span class="err">위치시킨다</span><span class="p">.</span>
<span class="mi">3</span><span class="p">.</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="err">는</span> <span class="k">WHERE</span><span class="err">절에서</span> <span class="err">비교연산자</span> <span class="err">기준으로</span> <span class="err">좌변</span> <span class="err">또는</span> <span class="err">우변의</span> <span class="err">어느</span> <span class="err">한쪽에</span> <span class="err">위치시킨다</span><span class="p">.</span>
<span class="mi">4</span><span class="p">.</span> <span class="k">OUTER</span> <span class="k">JOIN</span><span class="err">에서</span> <span class="k">IN</span><span class="err">이나</span> <span class="k">OR</span><span class="err">을</span> <span class="err">사용할</span> <span class="err">수</span> <span class="err">없다</span><span class="p">.</span>

<span class="o">//</span>
<span class="k">SELECT</span> <span class="n">E</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">E</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="k">C</span><span class="p">.</span><span class="n">NAME</span>
<span class="k">FROM</span> <span class="n">S_EMP</span> <span class="n">E</span><span class="p">,</span> <span class="n">S_CUSTOMER</span> <span class="k">C</span>
<span class="k">WHERE</span> <span class="n">E</span><span class="p">.</span><span class="n">ID</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="o">=</span> <span class="k">C</span><span class="p">.</span><span class="n">SALES_REP_ID</span> <span class="p">(</span><span class="k">AND</span> <span class="n">E</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="s1">'사원'</span> <span class="err">이라는</span> <span class="err">추가</span> <span class="err">조건을</span> <span class="err">주었는데</span><span class="p">,</span> <span class="err">값이</span> <span class="err">나타나지</span> <span class="err">않았다</span><span class="p">.</span>
<span class="err">왜</span><span class="o">?</span> <span class="mi">4</span><span class="err">번</span> <span class="err">조건에</span> <span class="err">위배되는</span> <span class="err">것으로</span> <span class="err">보인다</span><span class="p">.</span> <span class="k">WHERE</span> <span class="err">절에</span> <span class="err">추가적으로</span> <span class="err">조건을</span> <span class="err">달</span> <span class="err">수</span> <span class="err">없다는</span> <span class="err">이야기인듯</span><span class="o">?</span> <span class="err">확인</span> <span class="err">필요</span><span class="p">.)</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">E</span><span class="p">.</span><span class="n">ID</span> <span class="k">ASC</span><span class="p">;</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/2017-09-06-13.PNG" alt="Smithsonian Image"></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="k">SELF</span> <span class="k">JOIN</span><span class="err">의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="n">w</span><span class="p">.</span><span class="n">id</span> <span class="err">사번</span><span class="p">,</span> <span class="n">w</span><span class="p">.</span><span class="n">name</span> <span class="err">사원명</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">id</span> <span class="err">부서장사번</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">name</span> <span class="err">부서장명</span>
<span class="k">FROM</span> <span class="n">s_emp</span> <span class="n">w</span><span class="p">,</span> <span class="n">s_emp</span> <span class="n">m</span>
<span class="k">WHERE</span> <span class="n">w</span><span class="p">.</span><span class="n">manager_id</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="mi">1</span><span class="p">.</span> <span class="k">SELF</span> <span class="k">JOIN</span><span class="err">으로</span> <span class="err">하나의</span> <span class="err">테이블을</span> <span class="err">마치</span> <span class="err">여러개인</span> <span class="err">것처럼</span> <span class="err">사용가능</span>
<span class="mi">2</span><span class="p">.</span> <span class="err">반드시</span> <span class="err">테이블에</span> <span class="err">대한</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">각기</span> <span class="err">다르게</span> <span class="err">지정해야</span> <span class="err">한다</span><span class="p">.</span>
<span class="mi">3</span><span class="p">.</span> <span class="err">칼럼의</span> <span class="err">이름</span> <span class="err">앞에</span> <span class="err">반드시</span> <span class="err">테이블의</span> <span class="k">ALIAS</span><span class="err">를</span> <span class="err">붙여야</span> <span class="err">한다</span><span class="p">.</span>
<span class="mi">4</span><span class="p">.</span> <span class="k">SELF</span> <span class="k">JOIN</span><span class="err">의</span> <span class="err">횟수는</span> <span class="err">제한되어</span> <span class="err">있지</span> <span class="err">않다</span><span class="p">.</span>

<span class="o">//</span><span class="err">직원</span> <span class="err">중에</span> <span class="s1">'김정미'</span><span class="err">와</span> <span class="err">같은</span> <span class="err">직책</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="err">을</span> <span class="err">가지는</span> <span class="err">사원의</span> <span class="err">이름과</span> <span class="err">직책</span><span class="p">,</span> <span class="err">급여</span><span class="p">,</span> <span class="err">부서번호를</span> <span class="err">나타내시오</span><span class="p">.(</span><span class="k">SELF</span> <span class="k">JOIN</span><span class="err">을</span> <span class="err">사용할</span> <span class="err">것</span><span class="p">.)</span>
<span class="k">SELECT</span> <span class="n">M</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">M</span><span class="p">.</span><span class="n">TITLE</span><span class="p">,</span> <span class="n">M</span><span class="p">.</span><span class="n">SALARY</span><span class="p">,</span> <span class="n">M</span><span class="p">.</span><span class="n">DEPT_ID</span>
<span class="k">FROM</span> <span class="n">S_EMP</span> <span class="n">W</span><span class="p">,</span> <span class="n">S_EMP</span> <span class="n">M</span>
<span class="k">WHERE</span> <span class="n">W</span><span class="p">.</span><span class="n">TITLE</span> <span class="o">=</span> <span class="n">M</span><span class="p">.</span><span class="n">TITLE</span> <span class="k">AND</span> <span class="n">W</span><span class="p">.</span><span class="n">NAME</span> <span class="o">=</span> <span class="s1">'김정미'</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
<p><img src="/img/2017-09-06-14.PNG" alt="Smithsonian Image"></p>

<h3>SET연산자</h3>

<p>SET연산자의 종류</p>
<ul>
  <li>UNION : 각 QUERY결과의 합집합</li>
  <li>UNION ALL : 각 QUERY결과의 합집합에 공통부분을 더함</li>
  <li>INTERSECT : 각 QUERY결과의 교집합</li>
  <li>MINUS : 첫번째 QUERY결과와 두번째 QUERY결과의 차집합</li>
</ul>

<p><img src="https://www.dbguide.net/publishing/img/knowledge/SQL_205.jpg" alt="Smithsonian Image"><br></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td>
<td class="rouge-code"><pre><span class="k">SET</span><span class="err">연산자의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="err">칼럼</span><span class="mi">1</span><span class="p">,</span> <span class="err">칼럼</span><span class="mi">2</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="err">테이블</span><span class="mi">1</span> <span class="p">...</span>
  <span class="k">SET</span><span class="err">연산자</span>
<span class="k">SELECT</span> <span class="err">칼럼</span><span class="mi">1</span><span class="s1">', 칼럼2'</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="err">테이블</span><span class="mi">2</span> <span class="p">...</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="p">;</span>

<span class="mi">1</span><span class="p">.</span> <span class="err">첫번째</span> <span class="k">SELECT</span><span class="err">구문에서</span> <span class="err">기술된</span> <span class="err">칼럼들과</span> <span class="err">두번째</span> <span class="k">SELECT</span><span class="err">구문에서</span> <span class="err">기술된</span> <span class="err">칼럼들은</span> <span class="err">그</span> <span class="err">개수와</span> <span class="err">타입이</span> <span class="err">일치해야</span> <span class="err">한다</span><span class="p">.</span>
<span class="mi">2</span><span class="p">.</span> <span class="k">FROM</span><span class="err">절</span> <span class="err">뒤에</span> <span class="err">기술된</span> <span class="err">테이블은</span> <span class="err">서로</span> <span class="err">다를</span> <span class="err">수도</span><span class="p">,</span> <span class="err">같을</span> <span class="err">수도</span> <span class="err">있다</span><span class="p">.</span>
<span class="mi">3</span><span class="p">.</span> <span class="err">칼럼</span> <span class="n">HEADING</span><span class="err">는</span> <span class="err">첫번째</span> <span class="k">SELECT</span> <span class="err">구문의</span> <span class="err">컬럼명이</span> <span class="err">출력된다</span><span class="p">.</span>
<span class="mi">4</span><span class="p">.</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="err">절은</span> <span class="err">마지막에</span> <span class="err">한번만</span> <span class="err">기술한다</span><span class="p">.</span>

<span class="k">SET</span><span class="err">연산자</span> <span class="err">예시</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">WHERE</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="mi">110</span>
<span class="k">UNION</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span>
<span class="k">FROM</span> <span class="n">s_emap</span>
<span class="k">WHERE</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="mi">113</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="mi">1</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<h3>SUBQUERY</h3>

<ul>
  <li>SUBQUERY : 하나의 SELECT문 안에 포함되어 있는 또 다른 SELECT 문장</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre></td>
<td class="rouge-code"><pre><span class="o">//</span><span class="n">SUBQUERY</span><span class="err">의</span> <span class="err">기본</span> <span class="err">구조</span>
<span class="k">SELECT</span> <span class="err">검색할</span> <span class="err">컬럼들</span>
<span class="k">FROM</span> <span class="err">테이블명</span>
<span class="k">WHERE</span> <span class="err">형식</span> <span class="err">연산자</span> <span class="p">(</span><span class="k">SELECT</span> <span class="err">검색할</span> <span class="err">컬럼들</span>
                  <span class="k">FROM</span> <span class="err">테이블</span>
                  <span class="k">WHERE</span> <span class="p">...);</span>

<span class="o">*</span> <span class="n">SUBQUERY</span><span class="err">는</span> <span class="err">괄호로</span> <span class="err">묶여</span> <span class="err">있어야</span> <span class="err">한다</span><span class="p">.</span>
<span class="o">*</span> <span class="n">SUBQUERY</span><span class="err">구문에서는</span> <span class="k">ORDER</span> <span class="k">BY</span><span class="err">절을</span> <span class="err">포함할</span> <span class="err">수</span> <span class="err">없다</span><span class="p">.</span>
<span class="o">*</span> <span class="n">SUBQUERY</span><span class="err">는</span> <span class="err">연산자의</span> <span class="err">오른쪽에</span> <span class="err">나타나야</span> <span class="err">한다</span><span class="p">.</span>
<span class="o">*</span> <span class="n">SUBQUERY</span><span class="err">에서</span> <span class="err">사용할</span> <span class="err">수</span> <span class="err">있는</span> <span class="err">연산자의</span> <span class="err">종류</span>
  <span class="o">*</span> <span class="err">단일행</span> <span class="err">연산자</span><span class="p">(</span><span class="o">=</span><span class="p">,</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;=</span><span class="p">,</span><span class="o">&lt;</span><span class="p">,</span><span class="o">&lt;=</span><span class="p">,</span><span class="o">&lt;&gt;</span><span class="p">)</span>
  <span class="o">*</span> <span class="err">복수행</span> <span class="err">연산자</span><span class="p">(</span><span class="k">IN</span><span class="p">,</span> <span class="k">NOT</span> <span class="k">IN</span><span class="p">)</span>

<span class="o">//</span><span class="n">SINGLE</span> <span class="k">ROW</span> <span class="n">SUBQUERY</span>
<span class="n">SINGLE</span> <span class="k">ROW</span> <span class="n">SUBQUERY</span><span class="err">란</span> <span class="n">SUBQUERY</span><span class="err">에서</span> <span class="n">MAIN</span> <span class="n">QUERY</span><span class="err">로</span> <span class="err">전달되는</span> <span class="err">행이</span> <span class="err">단</span> <span class="err">하나인</span> <span class="err">경우다</span><span class="p">.</span> <span class="err">이런</span> <span class="err">경우는</span> <span class="err">단일</span> <span class="err">행</span> <span class="err">연산자를</span> <span class="err">사용한다</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">dept_id</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">WHERE</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">dept_id</span>
                 <span class="k">FROM</span> <span class="n">s_emp</span>
                 <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'김정미'</span><span class="p">);</span>
<span class="o">-&gt;</span><span class="err">전달되는</span> <span class="err">값이</span> <span class="mi">1</span><span class="err">행</span>

<span class="o">//</span><span class="n">MULTI</span> <span class="k">ROW</span> <span class="n">SUBQUERY</span>
<span class="n">MULTI</span> <span class="k">ROW</span> <span class="n">SUBQUERY</span><span class="err">란</span> <span class="n">SUBQUERY</span><span class="err">에서</span> <span class="n">MAIN</span> <span class="n">QUERY</span><span class="err">로</span> <span class="err">전달되는</span> <span class="err">행이</span> <span class="err">여러</span> <span class="err">개인</span> <span class="err">경우를</span> <span class="err">말한다</span><span class="p">.</span> <span class="err">이런</span> <span class="err">경우는</span> <span class="err">다중</span> <span class="err">행</span> <span class="err">연산자를</span> <span class="err">사용한다</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">dept_id</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">WHERE</span> <span class="n">dept_id</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id</span>
                 <span class="k">FROM</span> <span class="n">s_dept</span>
                 <span class="k">WHERE</span> <span class="n">region_id</span> <span class="o">=</span> <span class="mi">3</span><span class="p">);</span>
<span class="o">-&gt;</span><span class="err">전달되는</span> <span class="err">값이</span> <span class="err">여러</span> <span class="err">행</span>

<span class="o">//</span><span class="n">MULTI</span><span class="o">-</span><span class="k">COLUMN</span> <span class="n">SUBQUERY</span>
<span class="n">MULTI</span><span class="o">-</span><span class="k">COLUMN</span> <span class="n">SUBQUERY</span><span class="err">란</span> <span class="n">SUBQUERY</span><span class="err">구문을</span> <span class="err">작성할</span> <span class="err">때</span> <span class="k">WHERE</span><span class="err">절에서</span> <span class="err">비교하는</span> <span class="err">칼럼이</span>
<span class="err">하나가</span> <span class="err">아니라</span> <span class="err">여러</span> <span class="err">개의</span> <span class="err">칼럼을</span> <span class="err">동시에</span> <span class="err">비교하는</span> <span class="err">경우를</span> <span class="err">말하며</span> <span class="err">이런</span> <span class="err">경우를</span> <span class="n">pair</span><span class="o">-</span><span class="n">wise</span><span class="err">되었다고</span> <span class="err">한다</span><span class="p">.</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">dept_id</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="n">salary</span><span class="p">,</span> <span class="n">dept_id</span><span class="p">)</span> <span class="k">IN</span>
      <span class="p">(</span><span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span> <span class="n">dept_id</span>
      <span class="k">FROM</span> <span class="n">s_emp</span>
      <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept_id</span><span class="p">);</span>

<span class="o">//</span><span class="k">FROM</span><span class="err">절에서의</span> <span class="n">SUBQUERY</span> <span class="err">예시</span>
<span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span>
<span class="k">FROM</span><span class="p">(</span><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">dept_id</span>
     <span class="k">FROM</span> <span class="n">s_emp</span>
     <span class="k">WHERE</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">'사원'</span><span class="p">)</span> <span class="n">e</span><span class="p">,</span> <span class="n">s_dept</span> <span class="k">default</span><span class="p">:</span>
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="n">dept_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
<span class="err">한</span> <span class="err">테이블에</span> <span class="err">데이터의</span> <span class="err">양이</span> <span class="err">많은</span> <span class="err">경우에는</span> <span class="k">FROM</span><span class="err">절에</span> <span class="err">테이블</span> <span class="err">전체를</span> <span class="err">기술하여</span> <span class="err">사용하면</span> <span class="err">효율이</span> <span class="err">떨어질</span> <span class="err">수</span> <span class="err">있으므로</span>
<span class="err">일부의</span> <span class="err">행과</span> <span class="err">칼럼을</span> <span class="err">선택하여</span> <span class="k">FROM</span><span class="err">절에</span> <span class="n">SUBQUERY</span><span class="err">로</span> <span class="err">효율적인</span> <span class="err">검색을</span> <span class="err">가능하게한다</span><span class="p">.</span> <span class="err">이러한</span> <span class="n">SUBQUERY</span><span class="err">를</span> <span class="n">INLINE</span> <span class="k">VIEW</span><span class="err">라고</span> <span class="err">부른다</span><span class="p">.</span>
<span class="o">//</span><span class="k">HAVING</span><span class="err">절에서의</span> <span class="n">SUBQUERY</span> <span class="err">예시</span>
<span class="k">SELECT</span> <span class="n">dept_id</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">dept_id</span>
<span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
                      <span class="k">FROM</span> <span class="n">s_emp</span>
                      <span class="k">WHERE</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="mi">113</span><span class="p">);</span>
<span class="o">//</span><span class="k">CREATE</span><span class="err">절에서의</span> <span class="n">SUBQUERY</span> <span class="err">예시</span>
<span class="n">CREAT</span> <span class="n">TABEL</span> <span class="n">emp_113</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mailid</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">AS</span> <span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mailid</span><span class="p">,</span> <span class="n">start_date</span>
   <span class="k">FROM</span> <span class="n">s_emap</span>
   <span class="k">WHERE</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="mi">113</span><span class="p">;</span>

<span class="err">기존의</span> <span class="err">테이블을</span> <span class="err">이용하여</span> <span class="err">특정</span> <span class="err">컬럼</span><span class="p">,</span> <span class="err">행으로</span> <span class="err">원하는</span> <span class="err">테이블</span> <span class="err">생성</span><span class="p">.</span> <span class="err">데이터는</span> <span class="err">제외하고</span> <span class="err">테이블만</span> <span class="err">생성하려면</span> <span class="err">조건절이</span> <span class="err">항상</span> <span class="err">거짓이게</span> <span class="err">하면</span> <span class="err">된다</span><span class="p">.</span>
<span class="o">//</span><span class="n">DML</span><span class="err">문에서의</span> <span class="n">SUBQUERY</span> <span class="err">예시</span>
<span class="mi">1</span><span class="p">)</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">emp_113</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mailid</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mailid</span><span class="p">,</span> <span class="n">start_date</span>
<span class="k">FROM</span> <span class="n">s_emp</span>
<span class="k">WHERE</span> <span class="n">start_date</span> <span class="o">&lt;</span> <span class="s1">'16/01/01'</span><span class="p">;</span>
<span class="mi">2</span><span class="p">)</span>
<span class="k">UPDATE</span> <span class="n">s_emp</span>
<span class="k">SET</span> <span class="n">dept_id</span> <span class="o">=</span> <span class="p">(</span> <span class="k">SELECT</span> <span class="n">dept_id</span>
                <span class="k">FROM</span> <span class="n">s_emp</span>
                <span class="k">WHERE</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">'사장'</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'안창환'</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

  </article>
</div>

<!-- <div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/sql/2017/09/06/SQL2.html" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/sql/2017/09/06/SQL2.html" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/sql/2017/09/06/SQL2.html" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/sql/2017/09/06/SQL2.html" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/sql/2017/09/06/SQL2.html" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div> -->


<div id="disqus_thread"></div>
</div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-youduk-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>


<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>


        <footer>
  © 2018 Ducku Salon. Powered by <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://github.com/renyuanz/leonids/">customized with leonids theme</a> <i class="fa fa-heart heart-icon"></i>
</footer>

<!-- Channel Plugin Scripts -->
<script>
  ;window.channelPluginSettings = {
    "pluginKey": "9de17a11-abe2-455f-a49c-1c7da4fa312c"
  };
  (function() {
    var w = window;
    if (w.ChannelIO) {
      return (window.console.error || window.console.log || function(){})('ChannelIO script included twice.');
    }
    var d = window.document;
    var ch = function() {
      ch.c(arguments);
    };
    ch.q = [];
    ch.c = function(args) {
      ch.q.push(args);
    };
    w.ChannelIO = ch;
    function l() {
      if (w.ChannelIOInitialized) {
        return;
      }
      w.ChannelIOInitialized = true;
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = 'https://cdn.channel.io/plugin/ch-plugin-web.js';
      s.charset = 'UTF-8';
      var x = document.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    }
    if (document.readyState === 'complete') {
      l();
    } else if (window.attachEvent) {
      window.attachEvent('onload', l);
    } else {
      window.addEventListener('DOMContentLoaded', l, false);
      window.addEventListener('load', l, false);
    }
  })();
</script>
<!-- End Channel Plugin -->        
      </div>
    </div>
  </div>
  <script id="dsq-count-scr" src="//https-youduk-github-io.disqus.com/count.js" async></script>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>


    
</body>

</html>
